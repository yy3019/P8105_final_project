<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>report.utf8.md</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="simplex2-modded.min.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><div><img src="image/title-icon.png" height="22px"><span style="padding-left:10px">Fragility Index Project</div></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="proj_background.html">The Project</a>
    </li>
    <li>
      <a href="members.html">Members</a>
    </li>
  </ul>
</li>
<li>
  <a href="report.html">
    <span class="fa fa-file-text-o fa-lg"></span>
     
    Project Report
  </a>
</li>
<li>
  <a href="plotstuff.html">
    <span class="fa fa-calculator fa-lg"></span>
     
    FI calculator
  </a>
</li>
<li>
  <a href="plotstuff.html">
    <span class="fa fa-bar-chart fa-lg"></span>
     
    Graphs
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-telegram fa-lg"></span>
     
    Contact Us
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mailto:&lt;bjb2178@cumc.columbia.edu&gt;">Bryan Bunning</a>
    </li>
    <li>
      <a href="mailto:&lt;yy3019@cumc.columbia.edu&gt;">Yuanzhi Yu</a>
    </li>
    <li>
      <a href="mailto:&lt;zl2860@cumc.columbia.edu&gt;">Zongchao Liu</a>
    </li>
    <li>
      <a href="mailto:&lt;wk2343@cumc.columbia.edu&gt;">Gavin Ko</a>
    </li>
    <li>
      <a href="mailto:&lt;ksw2137@cumc.columbia.edu&gt;">Kevin S. Wongsodirdjo</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/yy3019/P8105_final_project.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>Our motivation behind this project is to explore the fragility index (FI) beyond what those involved in clinical trials have done. FI has been suggested as an easy-to-understand metric that bridges the intent of researchers and utilization by clinicians. It has growing interest in the oncology community but we want to explore its utility beyond this scope. You can go <a href="proj_background.html">here</a> to learn more about our motivation.</p>
<p><strong>Note:</strong> You can expand our code chunks by clicking on <code>code</code> on the right pill-button. <br></br></p>
<div id="some-facts" class="section level3">
<h3>Some facts</h3>
<p><br></br></p>
</div>
<div id="primary-goals" class="section level3">
<h3>Primary Goals</h3>
<p><br></br></p>
</div>
</div>
<div id="related-work" class="section level1">
<h1>Related work</h1>
<p>insert prior research? <br></br></p>
</div>
<div id="initial-questions" class="section level1">
<h1>Initial Questions</h1>
<p>Initial questions: What questions are you trying to answer? How did these questions evolve over the course of the project? What new questions did you consider in the course of your analysis? <br></br></p>
</div>
<div id="obtaining-data" class="section level1">
<h1>Obtaining Data</h1>
<div id="attempt-to-scrape-from-google-scholar" class="section level3">
<h3>Attempt to Scrape from Google Scholar</h3>
<p>Given the ease of access to Google Scholar (GS), we first attempted to scrape our sources from the site. We initially did this manually by searching some random entry in order to see a pattern where we can insert our “page number”. We found that we need to split Google’s search address into two partitions so that we can insert the search numbers.</p>
<pre class="r"><code># have to split link into 2 parts...
gs_url_base1 &lt;- &quot;https://scholar.google.com/scholar?start=&quot;
gs_url_base2 &lt;- &quot;&amp;q=monoclonal+antibody+phase+3&amp;hl=en&amp;as_sdt=0,33&amp;as_ylo=2007&amp;as_yhi=2017&amp;lookup=0&quot;

# adds the search term by 10s (obtained by evaluating scholar&#39;s http address)
gs_vec_url &lt;- str_c(gs_url_base1, seq(0, 100, 10), gs_url_base2)</code></pre>
<p>Once we figured out the web address components, we attempted to incorporate this into our scraping function by using <code>purrr::map</code> function and search for the term “monoclonal antibody phase 3”. Utilizing <a href="https://selectorgadget.com/">“SelectorGadget”</a>, we were able to obtain the css tag for the title, <code>.gs_rt a</code> and used this to scrape our articles/journals.</p>
<pre class="r"><code># GS scraper fn
read_page &lt;- function(url) {
  
  h = read_html(url)               # reads url input
  
  title = h %&gt;%
    html_nodes(&quot;.gs_rt a&quot;) %&gt;%     # pulls the specific html tag (for titles)
    html_text()
  
  data_frame(title)                # turns scraped data into a dataframe
}

# map read test
gs_test &lt;- map(gs_vec_url, read_page)

# unnested df test (success)
unnested_gs &lt;- gs_test %&gt;% 
  tibble::enframe(name = NULL) %&gt;% 
  unnest()

# peek into the first 3 results
head(unnested_gs, n = 3L)</code></pre>
<p>The code we made was successful in scraping the titles from GS. However, an apparent issue with this is that we’re unable to get the links to the actual paper. Furthermore, the various sources of the article will be highly varied when accessing these articles, which complicates the generalizability of our functions. Additionally, we’re unable to exclusively scrape the year of publication, which further worsens this method.</p>
<p>Given the apparent high ceiling to scrape via GS, we decided to stop using GS and tried PubMed scraping.</p>
</div>
<div id="scraping-from-pubmed" class="section level3">
<h3>Scraping from PubMed</h3>
<p>Attempting to scrape PubMed results for our relevant issues quickly comes to a halt because we noticed that as we try to search results, their html address does <strong>NOT</strong> change or provide a page number. We quickly scraped this from our viable methods to obtain our data.</p>
</div>
<div id="scraping-from-clinicaltrials.gov" class="section level3">
<h3>Scraping from clinicaltrials.gov</h3>
<div id="scraping-clinical-trial-id" class="section level5">
<h5>Scraping Clinical Trial ID</h5>
<p>Our last bastion, <a href="https://clinicaltrials.gov">clinicaltrials.gov</a>, were fortunately successful (in some ways). We ended up employing a combination of API search to obtain specific trial ID and use those to then scrape relevant contents from clinicaltrials.gov. You can see our codes and process in detail “link”</p>
<p>We first obtained (downloaded) a <code>.csv</code> file from clinicaltrials.gov that contained our advanced search options:</p>
<ul>
<li>options…</li>
</ul>
<p>After obtaining this file, we read it into R and clean-up the relevant part of this file. In particular, we have to clean the provided url as we’re only interested in the trial ID. We further filter the trials to those that has a “Placebo” arm.</p>
<pre class="r"><code>ctgov_scrape_test &lt;- read_csv(&quot;./data/ctgov_test_API.csv&quot;) %&gt;%      # read csv
  janitor::clean_names() %&gt;% 
  mutate(
    url = str_replace(url, &quot;https://ClinicalTrials.gov/show/&quot;, &quot;&quot;)    # keep trial ID only
  ) %&gt;% 
  rename(&quot;nct_id&quot; = url) %&gt;% 
  select(rank, nct_id, title, conditions, interventions) %&gt;%          # remove location; irrelevant
  filter(str_detect(interventions, &quot;Placebo&quot;))


## disabled code to check distinct categories of potential interest
#ctgov_scrape_test %&gt;% 
#  distinct(conditions) %&gt;% 
#  view()</code></pre>
<p>Now our “database” containing relevant clinical trials are ready. Before we continue, we need to obtain the html tags from clinicaltrials.gov which contains our variables of interest. With the help of SelectorGadget, we managed to isolate the tags to contain:</p>
<ul>
<li><code>#EXPAND-outcome-data-1 .labelSubtle</code> : label within the table this is the thing that needs to have participants or “Unit of Measure: Participants”</li>
<li><code>#EXPAND-outcome-data-1 td.de-outcomeLabelCell</code> : this is arm description for primary outcome</li>
<li><code>#EXPAND-outcome-data-1 tbody:nth-child(2) th</code> : this is description of table</li>
</ul>
<p>These tags will be used to identify certain cells in the messy table within clinicaltrials.gov. <br></br></p>
</div>
<div id="testing-data-scraping-and-transformation-to-dataframe" class="section level5">
<h5>Testing Data Scraping and Transformation to Dataframe</h5>
<p>We then test our code to be able to run and create a dataframe from a single source. It took quite a few trial and errors to be able to obtain the right form.</p>
<p>Firstly, we attempt to find an identifier relevant to our project that may help us automate the determination of which trial will be included.</p>
<pre class="r"><code># test to obtain the particular unit of measure; &quot;participants&quot;
test_url_ctgov &lt;- read_html(&quot;https://ClinicalTrials.gov/show/results/NCT00195702&quot;) %&gt;%
  html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle&quot;) %&gt;% 
  html_text() %&gt;% 
  str_replace(&quot;Unit of Measure: &quot;, &quot;&quot;)</code></pre>
<p>This returns our important “unit of measure”. We are particularly looking for variables that contain “participants”. Having found a way to detect this, we continued to build our function under the assumption that we have “participants” as our unit of measure.</p>
<p>We obtained the relevant column names:</p>
<pre class="r"><code># pulling the relevant column names that corresponds to the eventual numbers we pulled.
# this always has the first term be &quot;\n    Arm/Group Title \n  &quot;, which we will ignore
col_names_test &lt;- read_html(&quot;https://ClinicalTrials.gov/show/results/NCT00195702&quot;) %&gt;% 
  html_nodes(&quot;#EXPAND-outcome-data-1 tbody:nth-child(2) tr:nth-child(1) .de-outcomeLabelCell&quot;) %&gt;%
  html_text()

col_names_test</code></pre>
<pre><code>## [1] &quot;\n    Arm/Group Title \n  &quot;         
## [2] &quot;\n      DB Adalimumab 20 mg ew    &quot; 
## [3] &quot;\n      DB Adalimumab 40 mg Eow    &quot;
## [4] &quot;\n      DB Placebo ew    &quot;</code></pre>
<p>The row names, in case we need it as well:</p>
<pre class="r"><code># obtains relevant row names
# ideally this will be participants and the specified units of measure
row_names_test &lt;- read_html(&quot;https://ClinicalTrials.gov/show/results/NCT00195702&quot;) %&gt;% 
  html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle , #EXPAND-outcome-data-1 tbody:nth-child(2) tr:nth-child(4) .de-outcomeLabelCell&quot;) %&gt;%
  html_text()

row_names_test</code></pre>
<pre><code>## [1] &quot;\n    Overall Number of Participants Analyzed   &quot;
## [2] &quot;Unit of Measure: Participants&quot;</code></pre>
<p>And finally, our most important component, which is the number of participants in each group.</p>
<pre class="r"><code># scrape the actual data, with variable table length
content_test &lt;- read_html(&quot;https://ClinicalTrials.gov/show/results/NCT00195702&quot;) %&gt;% 
  html_nodes(&quot;#EXPAND-outcome-data-1 .de-numValue_outcomeDataCell&quot;) %&gt;%
  html_text() %&gt;% 
  as.numeric() %&gt;%                           # cleans our data to contain just the numbers
  matrix(ncol = length(col_names_test[-1]),  # make into a matrix of correct size 
         nrow = length(row_names_test), 
         byrow = TRUE) %&gt;% 
  as_tibble()                                # convert the matrix into a tibble

# add column names to our df
names(content_test) &lt;- col_names_test[-1]

# adds rownames to our tibbles
# a tibble doesnt show rownames when you call it but it is saved into R
rownames(content_test) &lt;- row_names_test

content_test</code></pre>
<pre><code>## # A tibble: 2 x 3
##   `\n      DB Adalimumab 2… `\n      DB Adalimumab 40… `\n      DB Placebo…
## *                     &lt;dbl&gt;                      &lt;dbl&gt;                &lt;dbl&gt;
## 1                       212                        207                  200
## 2                       129                        131                   59</code></pre>
<p>Though it took a while, our code managed to pull the relevant info that we need to manipulate in order to evaluate our fragility indexes. Our next step then, is to be able to <code>map</code> this and make a listcol within our original dataframe.</p>
</div>
<div id="building-the-function-with-the-proper-conditions-and-mapping." class="section level5">
<h5>Building the function with the proper conditions and mapping.</h5>
<p>Similar to how we approach making the single-url code, we had various trial and error to come up with the function. We start with a simple form of object that stores our url. We extract the “unit of measure” and evaluate whether or not it contains “participants” or “patients”; scrape if <code>TRUE</code>, return <code>NA</code> if <code>FALSE</code>.</p>
<p>A slightly different step was to split the content-scraping and data-frame transformation into two separate steps in order to clarify the segmentation.</p>
<pre class="r"><code># function to scrape from url
outcome_extractor &lt;- function(data) {
  
  # stores our list of urls
  site = read_html(str_c(&quot;https://ClinicalTrials.gov/show/results/&quot;, data))
  
  # pulls our &quot;measure&quot; detector
  measure = site %&gt;%
    html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle&quot;) %&gt;% 
    html_text() %&gt;% 
    str_replace(&quot;Unit of Measure: &quot;, &quot;&quot;)
  
  # if/else function that skips to the next url if our measure does not contain &quot;participants&quot; or &quot;patients&quot;
  if (length(measure) == 0) {      # added after bug found; accounts for length = 0
    NA
  } else if (!str_detect(measure, &quot;[pP]articipants|[pP]atients&quot;)) {
    NA            # returns NA if it doesn&#39;t exist
  } else {
    
    # pulls relevant column names
    col_names = site %&gt;%
      html_nodes(&quot;#EXPAND-outcome-data-1 tbody:nth-child(2) tr:nth-child(1) .de-outcomeLabelCell&quot;) %&gt;%
      html_text()
    
    # pulls row names (might be unnecessary)
    row_names = site %&gt;% 
      html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle , #EXPAND-outcome-data-1 tbody:nth-child(2) tr:nth-child(4) .de-outcomeLabelCell&quot;) %&gt;% 
      html_text()
    
    # pulls the actual numbers (content)
    content = site %&gt;% 
      html_nodes(&quot;#EXPAND-outcome-data-1 .de-numValue_outcomeDataCell&quot;) %&gt;% 
      html_text() %&gt;% 
      as.numeric()
    
    # makes a dataframe using matrix
    df = matrix(content, 
                ncol = length(col_names[-1]), 
                nrow = length(row_names), 
                byrow = TRUE) %&gt;% 
      as_tibble() 
    
    # adds column names
    names(df) &lt;- col_names[-1]
    #rownames(df) &lt;- row_names
    
    # returns the df output
    df
  }
}</code></pre>
<p>We then test this by scraping our .csv file, <code>ctgov_test_API.csv</code> located inside our <code>data</code> folder (loaded earlier) and map our newly-made function. A critical step after we tested this was that we need to filter our <code>NA</code> for our listcol to appear proper.</p>
<pre class="r"><code># testing our function using purrr::map function.
mapped_ctgov_scrape_test &lt;- ctgov_scrape_test %&gt;% 
  mutate(
    scrape_data = map(nct_id, outcome_extractor)
  ) %&gt;% 
  filter(!is.na(scrape_data))               # necessary step to clear out the NA rows.</code></pre>
</div>
<div id="mapping-our-real-dataset" class="section level5">
<h5>Mapping our real dataset</h5>
<p>Now that we have a working function that produces our expected extraction, we can use our real data source, <code>ctgov_10k_API</code>. This time, we just apply our previous functions and wait for about 30-40 minutes to “compile”.</p>
<p><strong>Note:</strong> During one of our tries, we realize that there’s an extra element in the “outcome measures” that we failed to take into account; <code>character(0)</code>. We had to debug this for a while to make our function work by adding another condition: <code>if(length(input) == 0)</code>, which returns <code>NA</code> if <code>TRUE</code>.</p>
<p><strong>TURN THE CODE OFF UNLESS READY TO BUILD WITH SIGNIFICANT UPDATES</strong></p>
<pre class="r"><code>ctgov_10k_df &lt;- read_csv(&quot;./data/ctgov_10k_API.csv&quot;) %&gt;%              # read csv
  janitor::clean_names() %&gt;%
  mutate(
    url = str_replace(url, &quot;https://ClinicalTrials.gov/show/&quot;, &quot;&quot;)    # keep trial ID only
  ) %&gt;% 
  rename(&quot;nct_id&quot; = url) %&gt;% 
  select(rank, nct_id, title, conditions, interventions) %&gt;%          # remove location; irrelevant
  filter(str_detect(interventions, &quot;Placebo&quot;))


# testing our function using purrr::map function.
ctgov_10k_scraped &lt;- ctgov_10k_df %&gt;% 
  mutate(
    scrape_data = map(nct_id, outcome_extractor)
  ) %&gt;% 
  filter(!is.na(scrape_data))               # necessary step to clear out the NA rows.</code></pre>
</div>
</div>
<div id="cleaning-data" class="section level3">
<h3>Cleaning Data</h3>
<p>Cleaning the data surprisingly wasn’t as bad as we thought. However, we do have to….</p>
<p>Our process is explained in detail “link”</p>
</div>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory Analysis</h1>
<p>Exploratory analysis: Visualizations, summaries, and exploratory statistical analyses. Justify the steps you took, and show any major changes to your ideas.</p>
</div>
<div id="other-analysis" class="section level1">
<h1>Other Analysis</h1>
<p>Additional analysis: If you undertake formal statistical analyses, describe these in detail</p>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>Discussion: What were your findings? Are they what you expect? What insights into the data can you make?</p>
</div>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">


 
<hr />
<p style="text-align: center;">
A work by <a href="https://github.com/Mediculus/">Bryan Bunning</a>, <a href="https://github.com/Mediculus/">Yuanzhi Yu</a>, <a href="https://github.com/Mediculus/">Zongchao Liu</a>, <a href="https://github.com/Mediculus/">Gavin Ko</a>, and <a href="https://github.com/Mediculus/">Kevin S.W.</a>
</p>
<p style="text-align: center;">
© Copyright 2019 The Fragility Index Project Team, All Rights Reserved | Powered by Github.io
</p>

<p> </p>




</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
