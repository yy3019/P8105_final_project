<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>report.utf8.md</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="simplex2-modded.min.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><div><img src="image/title-icon.png" height="22px"><span style="padding-left:10px">Fragility Index Project</div></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="proj_background.html">The Project</a>
    </li>
    <li>
      <a href="members.html">Members</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="report.html">
    <span class="fa fa-file-text-o fa-lg"></span>
     
    Project Report
  </a>
</li>
<li>
  <a href="https://yy3019.shinyapps.io/FI_calculator/">
    <span class="fa fa-calculator fa-lg"></span>
     
    FI Calculator
  </a>
</li>
<li>
  <a href="https://zongchaoliu.shinyapps.io/clinicaltrials_map/">
    <span class="fa fa-bar-chart fa-lg"></span>
     
    Trials
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-telegram fa-lg"></span>
     
    Contact Us
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mailto:&lt;bjb2178@cumc.columbia.edu&gt;">Bryan Bunning</a>
    </li>
    <li>
      <a href="mailto:&lt;yy3019@cumc.columbia.edu&gt;">Yuanzhi Yu</a>
    </li>
    <li>
      <a href="mailto:&lt;zl2860@cumc.columbia.edu&gt;">Zongchao Liu</a>
    </li>
    <li>
      <a href="mailto:&lt;wk2343@cumc.columbia.edu&gt;">Gavin Ko</a>
    </li>
    <li>
      <a href="mailto:&lt;ksw2137@cumc.columbia.edu&gt;">Kevin S. Wongsodirdjo</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/yy3019/P8105_final_project.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>Our motivation behind this project is to explore the fragility index (FI) beyond what those involved in clinical trials have done. FI has been suggested as an easy-to-understand metric that bridges the intent of researchers and utilization by clinicians. It has growing interest in the oncology community but we want to explore its utility beyond this scope. You can go <a href="proj_background.html">here</a> to learn more about our motivation.</p>
<p><strong>Note:</strong> You can expand our code chunks by clicking on <code>code</code> on the right pill-button.</p>
<div id="primary-goals" class="section level3">
<h3>Primary goals</h3>
<ul>
<li>Learn more about phase III clinical trials and the fragility index</li>
<li>Explore general trend of FI in recent phase III clinical trials<br />
</li>
<li>Discover potential associations between FI and factors such as disease type, treatment type, conducted location</li>
</ul>
</div>
<div id="secondary-goals" class="section level3">
<h3>Secondary goals</h3>
<ul>
<li>Explore other variables</li>
<li>Use available data the best we can to synthesize information about clinical trials</li>
<li>Construct a web-based FI calculator which allows user to input their own dataset</li>
</ul>
</div>
</div>
<div id="related-work" class="section level1">
<h1>Related Work</h1>
<p>The FI involves iteratively calculating Fisher’s exact test. After each calculation of a 2x2 table, we would artificially “add an event” to the smaller of the two groups and recalculate the Fisher’s exact test. The FI is the number of iterations necessary for the test to move past your predetermined alpha value, typically 0.05.</p>
<p>Smaller fragility indexes are not good, and suggest that the trial is more fragile.</p>
<p>Our study is inspired mainly by three recent aticles:</p>
<ul>
<li><a href="https://www.jclinepi.com/article/S0895-4356(13)00466-6/abstract">Walsh et al.</a> has general introduction on Fragility Index and methodology behind it. The author also provided an example of utilizing FI to evaluate the roubustness of a set of 399 eligible clinical trials.<br />
</li>
<li><a href="https://jamanetwork.com/journals/jamasurgery/fullarticle/2712857?fbclid=IwAR0bb9aN2gwCOFd-HLF-DFOmT60wBtziuFZ_CKdxIu-y40eXYb9GKa8LhcU">Tignanelli et al.</a> acknowleged FI as crucial part to be reported in further trama/ surgical RCT studies.<br />
</li>
<li><a href="https://www.thelancet.com/journals/lanonc/article/PIIS1470-2045(19)30338-9/fulltext">Del Paggio et al.</a> revealed a trembling fact that many of the FDA-approved phase III clinical studies had a low FI; some of them were even 1% or less of their respective sample size.</li>
</ul>
<p>These materials serve as the inspiration of our topic.</p>
<p>There has not been a consensus on the usage of the fragility index. It has pros and cons. A response from <a href="https://www.thelancet.com/journals/lanonc/article/PIIS1470-2045(19)30581-9/fulltext">Machado et al</a> directly responds to the Del Paggio paper linked above. A different lancet paper by <a href="https://www.thelancet.com/journals/lanonc/article/PIIS1470-2045(19)30583-2/fulltext">Desnoyers et al.</a> argues that the FI does not work with all data types, and one should be especially cogniscent of manipulating time-to-event data to fit into the FI as temporality is not taken into account. A brief letter from <a href="https://www.aaojournal.org/article/S0161-6420(18)30597-9/abstract">Porco et al.</a> was quite critical, stating that the FI “merely highlights one minor sensitivity analysis at the expense of other features of trial design and quality assessment”. <br></br></p>
</div>
<div id="initial-questions-and-goal" class="section level1">
<h1>Initial Questions and Goal</h1>
<p>As our initial goal, we want to find the relationship between fragility index and disease type in phase III RCT. To be more specific, we want to see if there’s significant difference in FI between trials targeting cancers and those targeting non-oncology immunologic disorders. Also, we would like to discover any other facotrs that may impact the FI of RCT studies. However, during the data collection process, we found out that all the criterias we’d applied would result in insufficient sample size to conduct further analysis. Accordingly, we’ve enlarged our filtering criteria to US based phase III clinical trials. <br></br></p>
</div>
<div id="what-we-actually-did-for-fi" class="section level1">
<h1>What We Actually Did for FI</h1>
<p>What we ended up doing differed from our initial hypothesis described in the above paragraph. After looking at the data we gathered, the questions we initially posed were not answerable. While we managed to scrape usable clinical trial data to calculate fragility index, the number of trials were not enough to make adequate visualizations or really anything substantial in our initial query which was filtered by drug type and disease type.</p>
<p>So we pivoted and instead <strong>scraped data from 10,000 completed phase 3 clinical trials prior to 2017</strong>. This took a lot of trial and error, and the various methods we attempted can be found in the <a href="https://yy3019.github.io/P8105_final_project.github.io/report.html#obtaining_data_for_fi">obtaining data for FI</a> section below. We ended up with <strong>39 trials</strong> that matched our specific criteria (primary outcome is a 2x2 table of the number of patients with placebo as one of the groups) to calculate fragility index.</p>
<p>Questions we could answer from this dataset include:</p>
<ol style="list-style-type: decimal">
<li>What is the median fragility index of our data obtained through our “MacGyvered” scraping method?</li>
<li>What sort of trends, if any, do we see from our basic information describing the trials? <br></br></li>
</ol>
<div id="obtaining-data-for-fi" class="section level2">
<h2>Obtaining Data for FI</h2>
<p>Our goal is to obtain data from clinical trials which is capable of calculating a fragility index in addition to any other information we may be able to easily gather. We attempted multiple methods to find such data.</p>
<div id="scraping-from-google-scholar" class="section level3">
<h3>Scraping from Google Scholar</h3>
<p>Given the ease of access to Google Scholar (GS), we first attempted to scrape our sources from the site. We initially did this manually by searching some random entry in order to see a pattern where we can insert our “page number”. We found that we need to split Google’s search address into two partitions so that we can insert the search numbers.</p>
<pre class="r"><code># have to split link into 2 parts...
gs_url_base1 &lt;- &quot;https://scholar.google.com/scholar?start=&quot;
gs_url_base2 &lt;- &quot;&amp;q=monoclonal+antibody+phase+3&amp;hl=en&amp;as_sdt=0,33&amp;as_ylo=2007&amp;as_yhi=2017&amp;lookup=0&quot;

# adds the search term by 10s (obtained by evaluating scholar&#39;s http address)
gs_vec_url &lt;- str_c(gs_url_base1, seq(0, 100, 10), gs_url_base2)</code></pre>
<p>Once we figured out the web address components, we attempted to incorporate this into our scraping function by using <code>purrr::map</code> function and search for the term “monoclonal antibody phase 3”. Utilizing <a href="https://selectorgadget.com/">“SelectorGadget”</a>, we were able to obtain the css tag for the title, <code>.gs_rt a</code> and used this to scrape our articles/journals.</p>
<pre class="r"><code># GS scraper fn
read_page &lt;- function(url) {
  
  h = read_html(url)               # reads url input
  
  title = h %&gt;%
    html_nodes(&quot;.gs_rt a&quot;) %&gt;%     # pulls the specific html tag (for titles)
    html_text()
  
  data_frame(title)                # turns scraped data into a dataframe
}

# map read test
gs_test &lt;- map(gs_vec_url, read_page)

# unnested df test (success)
unnested_gs &lt;- gs_test %&gt;% 
  tibble::enframe(name = NULL) %&gt;% 
  unnest()

# peek into the first 3 results
head(unnested_gs, n = 3L)</code></pre>
<p>The code we made was successful in scraping the titles from GS. However, an apparent issue with this is that we’re unable to get the links to the actual paper. Furthermore, the various sources of the article will be highly varied when accessing these articles, which complicates the generalizability of our functions. Additionally, we’re unable to exclusively scrape the year of publication, which further worsens this method.</p>
<p>Given the apparent high ceiling to scrape via GS, we decided to stop using GS and tried PubMed scraping.</p>
</div>
<div id="scraping-from-pubmed" class="section level3">
<h3>Scraping from PubMed</h3>
<p>Attempting to scrape PubMed results for our relevant issues quickly comes to a halt because we noticed that as we try to search results, their html address does <strong>NOT</strong> change or provide a page number. We quickly scraped this from our viable methods to obtain our data.</p>
</div>
<div id="scraping-from-clinicaltrials.gov" class="section level3">
<h3>Scraping from clinicaltrials.gov</h3>
<div id="rclinicaltrials-library" class="section level4">
<h4>rclinicaltrials library</h4>
<p><a href="https://github.com/sachsmc/rclinicaltrials">rclinicaltrials</a> is a library meant to serve as an R interface to clinicaltrials.gov! It allows you to perform basic and advanced searches, query the database, and then download study information in a “useful” format. The author even included a useful vignette which served as a useful example during initial testing.</p>
<p>Unforuntately, it ended up not being useful for our purposes. This R package’s last commit was in early 2017, and it looks like it is no longer being supported fully. However, there are still uses for this package as it can quickly grab information from clinicaltrials.gov and put it into an R object. It was not quickly apparant how it could be used in our situation.</p>
<p>The data from the <code>clinicaltrials_download</code> function was in a listcol with plenty of descriptive information. Unfortunately, the outcomes section did not include the actual n included in each participant arm, and the structure of the data was inconsistent between trials. It ended up being more of a hassle to try to use this package than other methods learned in class.</p>
<p>clinicaltrials.gov trial and error example code:</p>
<pre class="r"><code>#install_github(&quot;sachsmc/rclinicaltrials&quot;)
library(devtools)
library(rclinicaltrials)

test &lt;- clinicaltrials_download(query = &#39;asthma&#39;, count = 10, include_results = TRUE)
test$study_information$outcomes
myoutcomes&lt;- test$study_information$outcomes
head(myoutcomes)
#test$study_information
#Doing a query of multiple clinical trials results in a listcol

test2&lt;- clinicaltrials_download(query = &#39;NCT01123083&#39;, count = 1, include_results = TRUE)
test2$study_results$outcome_data$measure
outcomes2&lt;- test2$study_results$outcome_data
head(outcomes2)
#information is not exactly in a great format

test3 &lt;- clinicaltrials_download(query = &#39;NCT00195702&#39;, count = 1, include_results = TRUE)
outcomes3 &lt;- test3$study_results$outcome_data
baseline3 &lt;- test3$study_results$baseline_data
#information is inconsistent between trials</code></pre>
<p><img src="https://media.giphy.com/media/z9AUvhAEiXOqA/source.gif" /> <br></br></p>
</div>
<div id="scraping-via-clinical-trial-id" class="section level4">
<h4>Scraping via clinical trial ID</h4>
<p>Our last bastion, <a href="https://clinicaltrials.gov">clinicaltrials.gov</a>, was successful (in some ways). We ended up employing a combination of API search to obtain specific trial ID and use those to scrape relevant contents from clinicaltrials.gov.</p>
<p>We first obtained (downloaded) a <code>.csv</code> file from clinicaltrials.gov that contained our advanced search options:</p>
<ul>
<li>phase III trials</li>
<li>completed trial</li>
<li><em>add more here</em></li>
</ul>
<p>After obtaining this file, we read it into R and clean-up the relevant part of this file. In particular, we have to clean the provided url as we’re only interested in the trial ID. We further filtered trials to include those that has a “Placebo” arm.</p>
<pre class="r"><code>ctgov_scrape_test &lt;- read_csv(&quot;./data/ctgov_test_API.csv&quot;) %&gt;%      # read csv
  janitor::clean_names() %&gt;% 
  mutate(
    url = str_replace(url, &quot;https://ClinicalTrials.gov/show/&quot;, &quot;&quot;)    # keep trial ID only
  ) %&gt;% 
  rename(&quot;nct_id&quot; = url) %&gt;% 
  select(rank, nct_id, title, conditions, interventions) %&gt;%          # remove location; irrelevant
  filter(str_detect(interventions, &quot;Placebo&quot;))


## disabled code to check distinct categories of potential interest:
  ctgov_scrape_test %&gt;% 
  distinct(conditions) %&gt;% 
  view()

nrow(ctgov_scrape_test %&gt;% 
distinct(conditions))</code></pre>
<pre><code>## [1] 35</code></pre>
<p>Now our “database” containing relevant clinical trials are ready. This raw data contains 60 trials with roughly Before we continue, we need to obtain the html tags from clinicaltrials.gov which contains our variables of interest. With the help of SelectorGadget, we managed to isolate the tags to contain:</p>
<ul>
<li><code>#EXPAND-outcome-data-1 .labelSubtle</code> : label within the table this is the thing that needs to have participants or “Unit of Measure: Participants”</li>
<li><code>#EXPAND-outcome-data-1 td.de-outcomeLabelCell</code> : this is arm description for primary outcome</li>
<li><code>#EXPAND-outcome-data-1 tbody:nth-child(2) th</code> : this is description of table</li>
</ul>
<p>These tags will be used to identify certain cells in the messy table within clinicaltrials.gov.</p>
<p>Example trial from clinicaltrials.gov seen below: <img src="image/clinical_trials_scraping_ex.png" /> <br></br></p>
<div id="testing-data-scraping-and-transformation-to-dataframe" class="section level5">
<h5>Testing Data Scraping and Transformation to Dataframe</h5>
<p>The goal of this portion is to iteratively grab primary outcome data from clinicaltrials.gov, determine if the type of data allows us to calculate a fragility index, then tidy the data into a tibble to allow us to actually calculate it.</p>
<p>We started by testing our code to create a dataframe from a single source. It took quite a few trial and errors to be able to obtain the right form.</p>
<p>Firstly, we attempt to find an identifier relevant to our project that may help us automate the determination of which trial has data eligible for calculating FI.</p>
<pre class="r"><code># test to obtain the particular unit of measure; &quot;participants&quot;
test_url_ctgov &lt;- read_html(&quot;https://ClinicalTrials.gov/show/results/NCT00195702&quot;) %&gt;%
  html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle&quot;) %&gt;% 
  html_text() %&gt;% 
  str_replace(&quot;Unit of Measure: &quot;, &quot;&quot;)</code></pre>
<p>This returns the “unit of measure” of the primary outcome of any given clinical trial. We are particularly looking for outcomes that contain “participants”. We do this because we are looking for trials that have a primary endpoint that involves a standard 2x2 table, which will allow us to calculate a fisher exact test, which is necessary to calculate the fragility index. Through trial and error, we found “unit of measure” to be the best proxy to filter the data.</p>
<p>Having found a way to detect this, we continued to build our function under the assumption that we have “participants” as our unit of measure.</p>
<p>We obtained the relevant column names:</p>
<pre class="r"><code># pulling the relevant column names that corresponds to the eventual numbers we pulled.
# this always has the first term be &quot;\n    Arm/Group Title \n  &quot;, which we will ignore
col_names_test &lt;- read_html(&quot;https://ClinicalTrials.gov/show/results/NCT00195702&quot;) %&gt;% 
  html_nodes(&quot;#EXPAND-outcome-data-1 tbody:nth-child(2) tr:nth-child(1) .de-outcomeLabelCell&quot;) %&gt;%
  html_text()

col_names_test</code></pre>
<pre><code>## [1] &quot;\n    Arm/Group Title \n  &quot;         
## [2] &quot;\n      DB Adalimumab 20 mg ew    &quot; 
## [3] &quot;\n      DB Adalimumab 40 mg Eow    &quot;
## [4] &quot;\n      DB Placebo ew    &quot;</code></pre>
<p>The row names, in case we need it as well:</p>
<pre class="r"><code># obtains relevant row names
# ideally this will be participants and the specified units of measure
row_names_test &lt;- read_html(&quot;https://ClinicalTrials.gov/show/results/NCT00195702&quot;) %&gt;% 
  html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle , #EXPAND-outcome-data-1 tbody:nth-child(2) tr:nth-child(4) .de-outcomeLabelCell&quot;) %&gt;%
  html_text()

row_names_test</code></pre>
<pre><code>## [1] &quot;\n    Overall Number of Participants Analyzed   &quot;
## [2] &quot;Unit of Measure: Participants&quot;</code></pre>
<p>And finally, our most important component, which is the number of participants in each group. The code chunks above and below combined detect the number of rows and columns in any clinicaltrials.gov website, grab available data in a vector, then recreate the table in a tidy fashion within R!</p>
<pre class="r"><code># scrape the actual data, with variable table length
content_test &lt;- read_html(&quot;https://ClinicalTrials.gov/show/results/NCT00195702&quot;) %&gt;% 
  html_nodes(&quot;#EXPAND-outcome-data-1 .de-numValue_outcomeDataCell&quot;) %&gt;%
  html_text() %&gt;% 
  as.numeric() %&gt;%                           # cleans our data to contain just the numbers
  matrix(ncol = length(col_names_test[-1]),  # make into a matrix of correct size 
         nrow = length(row_names_test), 
         byrow = TRUE) %&gt;% 
  as_tibble()                                # convert the matrix into a tibble

# add column names to our df
names(content_test) &lt;- col_names_test[-1]

# adds rownames to our tibbles
# a tibble doesnt show rownames when you call it but it is saved into R
rownames(content_test) &lt;- row_names_test

content_test</code></pre>
<pre><code>## # A tibble: 2 x 3
##   `\n      DB Adalimumab 2… `\n      DB Adalimumab 40… `\n      DB Placebo…
## *                     &lt;dbl&gt;                      &lt;dbl&gt;                &lt;dbl&gt;
## 1                       212                        207                  200
## 2                       129                        131                   59</code></pre>
<p>Though it took a while, our code managed to pull the relevant info that we need to manipulate in order to evaluate our fragility indexes. Our next step then, is to be able to <code>map</code> this and make a listcol within our original dataframe.</p>
</div>
<div id="building-the-function-with-the-proper-conditions-and-mapping" class="section level5">
<h5>Building the function with the proper conditions and mapping</h5>
<p>Similar to how we approach making the single-url code, we had various trial and error to come up with the function. We start with a simple form of object that stores our url. We extract the “unit of measure” and evaluate whether or not it contains “participants” or “patients”; scrape if <code>TRUE</code>, return <code>NA</code> if <code>FALSE</code>.</p>
<p>A slightly different step was to split the content-scraping and data-frame transformation into two separate steps in order to clarify the segmentation.</p>
<pre class="r"><code># function to scrape from url
outcome_extractor &lt;- function(data) {
  
  # stores our list of urls
  site = read_html(str_c(&quot;https://ClinicalTrials.gov/show/results/&quot;, data))
  
  # pulls our &quot;measure&quot; detector
  measure = site %&gt;%
    html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle&quot;) %&gt;% 
    html_text() %&gt;% 
    str_replace(&quot;Unit of Measure: &quot;, &quot;&quot;)
  
  # if/else function that skips to the next url if our measure does not contain &quot;participants&quot; or &quot;patients&quot;
  if (length(measure) == 0) {      # added after bug found; accounts for length = 0
    NA
  } else if (!str_detect(measure, &quot;[pP]articipants|[pP]atients&quot;)) {
    NA            # returns NA if it doesn&#39;t exist
  } else {
    
    # pulls relevant column names
    col_names = site %&gt;%
      html_nodes(&quot;#EXPAND-outcome-data-1 tbody:nth-child(2) tr:nth-child(1) .de-outcomeLabelCell&quot;) %&gt;%
      html_text()
    
    # pulls row names (might be unnecessary)
    row_names = site %&gt;% 
      html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle , #EXPAND-outcome-data-1 tbody:nth-child(2) tr:nth-child(4) .de-outcomeLabelCell&quot;) %&gt;% 
      html_text()
    
    # pulls the actual numbers (content)
    content = site %&gt;% 
      html_nodes(&quot;.de-numValue_outcomeDataCell&quot;) %&gt;% 
      html_text() %&gt;% 
      as.numeric()
    
    # makes a dataframe using matrix
    df = matrix(content, 
                ncol = length(col_names[-1]), 
                nrow = length(row_names), 
                byrow = TRUE) %&gt;% 
      as_tibble() 
    
    # adds column names
    names(df) &lt;- col_names[-1]
    rownames(df) &lt;- row_names
    
    # returns the df output
    df
  }
}</code></pre>
<p>We then test this by scraping our .csv file, <code>ctgov_test_API.csv</code> located inside our <code>data</code> folder (loaded earlier) and map our newly-made function. A critical step after we tested this was that we need to filter our <code>NA</code> for our listcol to appear properly.</p>
<pre class="r"><code># testing our function using purrr::map function.
mapped_ctgov_scrape_test &lt;- ctgov_scrape_test %&gt;% 
  mutate(
    scrape_data = map(nct_id, outcome_extractor)
  ) %&gt;% 
  filter(!is.na(scrape_data))               # necessary step to clear out the NA rows.</code></pre>
<p>We then checked those trials that contain 2x2 table from our original file but we only found 6 (uh oh). After realizing the situation we were in (yikes) and the amount of data we were likely able to get using the initial hypothesis (close to none), we expanded our initial search options to any completed phase 3 clinical trials.</p>
</div>
<div id="mapping-our-10000-dataset" class="section level5">
<h5>Mapping our 10,000 dataset</h5>
<p>Now that we expanded our scope, we use our working function on our new data source, <code>ctgov_10k_API</code>. This however, takes about 30-40 minutes to “compile”.</p>
<p><strong>Note:</strong> During one of our tries, we realize that there’s an extra element in the “outcome measures” that we failed to take into account; <code>character(0)</code>. This is different from <code>NA</code>. We had to debug this for a while to make our function work by adding another condition: <code>if(length(input) == 0)</code>, which returns <code>NA</code> if <code>TRUE</code>.</p>
<pre class="r"><code>ctgov_10k_df &lt;- read_csv(&quot;./data/ctgov_10k_API.csv&quot;) %&gt;%              # read csv
  janitor::clean_names() %&gt;%
  mutate(
    url = str_replace(url, &quot;https://ClinicalTrials.gov/show/&quot;, &quot;&quot;)    # keep trial ID only
  ) %&gt;% 
  rename(&quot;nct_id&quot; = url) %&gt;% 
  select(rank, nct_id, title, conditions, interventions) %&gt;%     
  filter(str_detect(interventions, &quot;Placebo&quot;))

# testing our function using purrr::map function.
ctgov_10k_scraped &lt;- ctgov_10k_df %&gt;% 
  mutate(
    scrape_data = map(nct_id, outcome_extractor)
  ) %&gt;% 
  filter(!is.na(scrape_data))               # necessary step to clear out the NA rows.</code></pre>
<p>After all this, our resulting viable dataset is <code>nrow(ctgov_10k_scraped)</code> datasets that each contains the primary outcomes of interest. There are roughly <code>nrow(ctgov_10k_scraped %&gt;% distinct(conditions))</code> unique conditions found using <code>distinct()</code> function.</p>
</div>
<div id="cleaning-the-scraped-dataset" class="section level5">
<h5>Cleaning the Scraped Dataset</h5>
<p>After scraping the hard numbers in the <code>scrape_data</code> column, we found that according to clinicaltrials.gov output issue, the html node doesn’t necessarily extract the information we want. Therefore, we have no choice but to filter out those contains NA values in the scraped table.</p>
<pre class="r"><code># left as _test for now, change it back to ctgov_10k_scraped later
ctgov_10k_scraped &lt;- ctgov_10k_scraped %&gt;% 
  mutate(
    nainside = map_chr(scrape_data, anyNA)) 


ctgov_10k_scraped %&gt;% 
  count(nainside)</code></pre>
<p>As shown above, we have <code>length(which(pull(ctgov_10k_scraped, nainside) == FALSE))</code> intact datasets for FI analysis. We further filter this by selecting only the datasets that has number of participants as unit of measure.</p>
<pre class="r"><code># select those doesn&#39;t contain NAs
clean_ctgov_df &lt;- ctgov_10k_scraped %&gt;% 
  filter(nainside == F)

# scrape out the unit of measure terms
unit_detector = function(data) {
  
  site = read_html(str_c(&quot;https://ClinicalTrials.gov/show/results/&quot;, data))
  
  measure = site %&gt;% 
    html_nodes(&quot;#EXPAND-outcome-data-1 .labelSubtle&quot;) %&gt;% 
    html_text() %&gt;% 
    str_replace(&quot;Unit of Measure:&quot;, &quot;&quot;)
  
  return(measure)
}

# adding unit of measure to the dataset
clean_ctgov_df &lt;- clean_ctgov_df %&gt;% 
  mutate(
    units = map_chr(nct_id, unit_detector)
  )

# remove those containing percentile in unit of measure
new_df &lt;- clean_ctgov_df %&gt;% 
  filter(!str_detect(units, &quot;[pP]ercent|[pP]ercentage|[pP]roportion&quot;)) %&gt;% 
  mutate(
    nrow = map_dbl(scrape_data, nrow),
    ncol = map_dbl(scrape_data, ncol)
  ) %&gt;% 
  filter(ncol == 2 &amp; nrow == 2)</code></pre>
<p>For now, we already found the trials with number of patient counts as unit of measures, and we further filtered out those that have complicated results more than 2 arms. The resulting dataset has 39 rows.</p>
<p>After we tried numerous method to detach the tibbles in the list column, non of these had worked. Therefore, we have no choice but to manually type out the 39 studies and save it as a new csv file.</p>
<pre class="r"><code># some miracle happened!!!
manual = read_csv(&quot;./data/FI2by2_manual.csv&quot;)

# rejoin the results back to the orignial data
final_df &lt;- 
  left_join(new_df, manual, by = &quot;nct_id&quot;) %&gt;% 
  select(everything(), -nrow, -ncol, -nainside, -scrape_data)</code></pre>
<p>We thought we were fine already, but not yet. The built in function <code>fragility.index</code>, which you can read about <a href="https://www.rdocumentation.org/packages/fragilityindex/versions/0.1.0">in the R documentation here</a>, seemed to have consumed tons of workspace in R studio, which would not allow us to simply map the function to the dataset. Instead, we needed to calculate the FI one by one.</p>
<pre class="r"><code># for loop constructing
nct = c()
FI = c()

for (i in 1:nrow(final_df))
{
    nct[i] = final_df$nct_id[i]
    FI[i] = fragility.index(final_df$effective_trt[i], 
                            final_df$effective_placebo[i], 
                            final_df$total_number_trt[i],  
                            final_df$total_number_placebo[i])
} 

# create temporary dataframe to store the results of FI
tempo =   
  tibble(
    nct_id = nct,
    FI = as.numeric(FI)) 

# left join the final results

finalff_df = left_join(final_df, tempo, by = &quot;nct_id&quot;) </code></pre>
<p>The resulting dataset now includes basic infomration about the trial in addition to its fragility index.</p>
</div>
<div id="eda-for-fragility-index" class="section level5">
<h5>EDA for Fragility Index</h5>
<p>Given the limited information we obtained so far, we could only create general descriptive table and bar plot of FI corresponding to the disease conditions.</p>
<pre class="r"><code># quick review of available FI data
finalff_df %&gt;% 
  select(title, conditions, interventions, FI) %&gt;% 
  filter(FI != 0) %&gt;% 
  arrange(desc(FI)) %&gt;% 
  knitr::kable(&quot;html&quot;, booktabs = TRUE, linesep = &quot;&quot;, digits = 3, 
         caption = &quot;Summary Statistics of each Variable&quot;) %&gt;% 
  kableExtra::kable_styling(full_width = TRUE)

# barplot according to corresponding disease/ treatment

finalff_df %&gt;% 
  filter(FI != 0) %&gt;% 
  arrange(desc(FI)) %&gt;% 
  ggplot(aes(x = reorder(conditions, FI), y = FI)) +
  geom_bar(stat = &quot;identity&quot;, color = &quot;steelblue2&quot;, fill = &quot;steelblue2&quot;) +
  coord_flip() +                                                 # flip x-y to better &quot;stratify&quot; categories
  theme(legend.position = &quot;none&quot;,                                # remove legends
        axis.text.y = 
          element_text(hjust = 1, vjust = 0.5,                   # adjusts the hor/ver alignment of y-variables
                       size = 8,                    # resize text size and rotate at an angle
                       margin = margin(0, 0, 0, 70)),          # reduce margin to close gap between label/graph
        panel.grid.major.y = element_blank()                     # remove horizontal lines to improve readability
        ) + 
  labs(x = &quot;Disease&quot;, y = &quot;Fragility Index&quot;)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="quest-for-more-all-data-from-clinicaltrials.gov" class="section level1">
<h1>Quest for <del>more</del> All Data from clinicaltrials.gov</h1>
<p>The dataset we collected above was light in the sense that our scraping method did not gather other descriptive information. We needed more data to allow us to graph information required for this project. Here, we pivoted, again, to look at phase III clinical trials more generally. Our group members are interested in clinical trials, which despite their importance to US healthcare seem very shrouded in mystery. The fragility index was a very pointed question in this area of our healthcare system we do not know much about. There is a lot of general information about trials unknown to our group which might be interesting to look at.</p>
<p>So, to supplement our data scraping of clinical trial data, we decided instead to download <strong>every clinical trial from clinicaltrials.gov</strong> through XML indicator. This included a 800 MB csv including descriptive information about each trial. This dataset was quite large, and crashed multiple members’ computers multiple times.</p>
<p>There were many questions which we could answer with this data, although it is not about the fragility index at all. Instead, this data gave us a glimpse into the field.<br />
Questions we looked at include:</p>
<ol style="list-style-type: decimal">
<li>Where are clinical trials being done in the United States?</li>
<li>How many trials are done per year? Has it changed much year to year?</li>
<li>Who sponsors clinical trials?</li>
<li>Other interesting tidbits</li>
</ol>
<p>We filtered our scraped XML for all US based studies. The data extracting and processing code are shown below. It does not run, as the file is WAY TOO BIG.</p>
<pre class="r"><code>######### step 1

# get all names of the downloaded xml files
get_file_names = function(){
  file_list = tibble(
    file_name = list.files(&quot;/Users/adobel/Desktop/Columbia/data\ science/homework/rclinicaltrials/AllPublicXML&quot;, recursive = T)
  ) 
} 
# the xml files are too large to be submitted to github, so we kept the directory local

############ step 2

# build a dataframe for future mapping
all_files = get_file_names() %&gt;%
  separate(file_name,c(&quot;1&quot;,&quot;file_name&quot;)) %&gt;%
  select(&#39;file_name&#39;) %&gt;%
  .[-1,]

### step 3
### build a function that automatically reads and parses each xml file, and organizes the information into a dataframe

xml_reader = function(file_name){
  file = xmlParse(str_c(&quot;/Users/adobel/Desktop/Columbia/data\ science/homework/rclinicaltrials/AllPublicXML/&quot;,
                        str_sub(file_name,start = 1, end = 7), &quot;xxxx/&quot;,
                        file_name,&quot;.xml&quot;))  #directory of each file
#########
  xmltop = xmlRoot(file) # get nodes
######### get interested variables
  
  new_tbl = tibble(
    overall_status = xmlValue(xmltop[[&#39;overall_status&#39;]]),
    phase = xmlValue(xmltop[[&#39;phase&#39;]]),
    study_type = xmlValue(xmltop[[&#39;study_type&#39;]]),
    masking = xmlValue(xmltop[[&#39;study_design_info&#39;]][[&#39;masking&#39;]]),
    primary_outcome = xmlValue(xmltop[[&#39;primary_outcome&#39;]]),
    sponsors =  xmlValue(xmltop[[&#39;sponsors&#39;]]),
    start_date = xmlValue(xmltop[[&#39;start_date&#39;]]),
    completion_date = xmlValue(xmltop[[&#39;completion_date&#39;]]),
    primary_completion_date = xmlValue(xmltop[[&#39;primary_completion_date&#39;]]),
    observational_model = xmlValue(xmltop[[&#39;study_design_info&#39;]][[&#39;observational_model&#39;]]),
    time_perspective = xmlValue(xmltop[[&#39;study_design_info&#39;]][[&#39;time_perspective&#39;]]),
    measure = xmlValue(xmltop[[&#39;primary_outcome&#39;]][[&#39;measure&#39;]]),
    time_frame = xmlValue(xmltop[[&#39;primary_outcome&#39;]][[&#39;time_frame&#39;]]),
    enrollment = xmlValue(xmltop[[&#39;enrollment&#39;]]),
    study_pop = xmlValue(xmltop[[&#39;eligibility&#39;]][[&#39;study_pop&#39;]]),
    sampling_method = xmlValue(xmltop[[&#39;eligibility&#39;]][[&#39;sampling_method&#39;]]),
    criteria = xmlValue(xmltop[[&#39;eligibility&#39;]][[&#39;criteria&#39;]]),
    gender = xmlValue(xmltop[[&#39;eligibility&#39;]][[&#39;gender&#39;]]),
    minimum_age = xmlValue(xmltop[[&#39;eligibility&#39;]][[&#39;minimum_age&#39;]]),
    maximum_age = xmlValue(xmltop[[&#39;eligibility&#39;]][[&#39;maximum_age&#39;]]),
    healthy_volunteers = xmlValue(xmltop[[&#39;eligibility&#39;]][[&#39;healthy_volunteers&#39;]]),
    study_first_submitted = xmlValue(xmltop[[&#39;study_first_submitted&#39;]]),
    study_first_posted = xmlValue(xmltop[[&#39;study_first_posted&#39;]]),
    location_city = xmlValue(xmltop[[&#39;location&#39;]][[&#39;facility&#39;]][[&#39;address&#39;]][[&#39;city&#39;]]),
    location_state = xmlValue(xmltop[[&#39;location&#39;]][[&#39;facility&#39;]][[&#39;address&#39;]][[&#39;state&#39;]]),
    location_country = xmlValue(xmltop[[&#39;location&#39;]][[&#39;facility&#39;]][[&#39;address&#39;]][[&#39;country&#39;]]),
    agency_class = xmlValue(xmltop[[&#39;sponsors&#39;]][[&#39;lead_sponsor&#39;]][[&#39;agency_class&#39;]])
    )
}

# build dataset
data_from_xml = map_df(all_files$file_name,xml_reader)
data_from_xml = bind_cols(all_files,data_from_xml)
data_from_xml_cleaned = data_from_xml %&gt;% 
  drop_na() %&gt;%
  mutate(file_group = str_c( str_sub(file_name,start = 1, end = 7), &quot;xxxx&quot;))

# save files to local pathway
write_csv(data_from_xml,&quot;./data_from_xml.csv&quot;)
write_csv(data_from_xml_cleaned ,&quot;./data_from_xml_cleaned.csv&quot;)

# get data only for US studies
test_us =
  data_from_xml %&gt;%
  filter(location_country == &quot;United States&quot;) %&gt;%
  mutate(location_state = recode(location_state,
                                 &quot;Missouri&quot; = &quot;Missouri State&quot;))</code></pre>
<p>This dataset includes tidied descriptive information about every US-based clincal trials.</p>
</div>
<div id="data-summary-and-results" class="section level1">
<h1>Data Summary and Results</h1>
<p>To summarize, we have 2 datasets that we used for further analysis and exploration:</p>
<ol style="list-style-type: decimal">
<li>A dataset created through html scraping clinicaltrials.gov which gave us trials eligible to calculate the fragility index with supporting information about the trial.</li>
</ol>
<ul>
<li>This dataset started with 10,000 phase 3 clinical trials completed before 2017.</li>
<li>1950 included a placebo arm, of which 620 had “Participant” as a unit of measure, of which 274 had complete data, of which 120 actually counted participants, of which 39 had a 2x2 table</li>
<li>11/39 had a non-0 fragility index</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>A separate and distinct dataset created by selecting information by XML to explore trends in clinical trials.</li>
</ol>
<ul>
<li>The results from this data can be explored with our <a href="https://zongchaoliu.shinyapps.io/clinicaltrials_map/">Shiny app graphs you can find here</a></li>
</ul>
<p>The main product of our project consists of three parts:</p>
<ol style="list-style-type: decimal">
<li>A custom made dataset generated from clinicaltrials.gov, including respective FI</li>
<li>A collection of all available clinical trial data from clinicaltrials.gov
<ul>
<li>Containing general characteristics of clinical trials</li>
</ul></li>
<li>Interactive plots utilizing the data above</li>
<li>A functional FI calculator for meta-analysis</li>
</ol>
<div id="interactive-plot-of-clinical-trials-characteristics" class="section level2">
<h2>Interactive Plot of Clinical Trials Characteristics</h2>
<p>Given the collection of all available clinical trial data, we are allowed to integrate a bunch of interactive plots.</p>
<p><img src="image/Int_plot_tab1.JPG" /></p>
<p>On the first tab <em>Spatial Distribution</em>, first of all, we can see the distribution of number of clinical trials across the conutry; if we click on the circles, it goes further into more specific geographical locations. For the checkbox on the left, we’re allowed to filter acoording to types of study: interventional, observational, patient registry and also expanded access.</p>
<p>On the right side, by selecting different agency class, we can filter through the sponsors of study: US Federal, NIH, Industry or other. The histogram on the left interacts with the selection from the right and is ranked by number of trials in the US from the higest to the lowest.</p>
<p>For the time trend plot below, we can compare the number of completed/ongoing clinical trials sponsored by different agencies.</p>
<p><img src="image/Int_plot_tab2.JPG" /></p>
<p>On the second tab <em>Sponsor Information</em>, we’ve collected information of every single sponsor that invloved in clinical trials. We have their registered name, number of sponsored studies, total participants enrolled in their studies, average number of participants in their trials, and the minimum and maximum number of participants enrolled in their single study.</p>
</div>
<div id="functional-fi-calculator-for-meta-analysis" class="section level2">
<h2>Functional FI calculator for meta-analysis</h2>
<p>We initially wanted to create a custom FI calculator. Fortunately, this already existed in an R package, <code>fragilityindex</code>, and through a meta-analysis custom function which we found on github <a href="https://github.com/iatal/fragility_ma/tree/master/app/functions_fragility">here</a>. We incorporated this to our website and added interactivity so that users can input their own dataset and different parameters.</p>
<p><img src="image/FI_calculator_icon.png" /></p>
<p>As shown above, the interactive parameters in the function includes:</p>
<ol style="list-style-type: decimal">
<li>Upload meta-analysis data: takes csv files in specific format</li>
<li>Parameters of the meta-analysis: options include Mantel-Haenszel, Inverse Variance, Peto</li>
<li>Measure: the statistic to assess testing results and corresponding p-vlaue. Options include: Odds Ratio, Risk Difference, Risk Ratio</li>
<li>Random effects: options include Fixed or Random effects</li>
</ol>
<p>All these parameters are contained in the function we found. Although we have not learned about all of them, they are interactive!</p>
</div>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>Overall, we were not able to answer any of the questions we initally suggested in our initial proposal. We simply were not able to gather data capable of answering the questions. Thankfully, there are many insights we were able to gather from the data we were able to collect!</p>
<div id="main-data-fragility-index" class="section level2">
<h2>Main Data: fragility index</h2>
<p>This project showed how difficult scraping data from a website could be if the data has a varied structure. It was much, much more difficult to scrape and tidy the data than we were originally anticipating, especially given the “tools” that were available to us prior to trying them.</p>
<p>We learned a lot about the data structure of clinicaltrials.gov and general information about phase 3 clinical trials. We were suprised by the relatively messy data structure of clinicaltrials.gov. The main primary outcome table was inconsistent with its white space usage in the html table, which gave us an immense amount of issues.</p>
<p>Thankfully, clinicaltrials.gov is updating their API, which should hopefully improve upon the structure of this data. We learned the hard way the difference between publicly available data, and <strong>usable</strong> publicly available data. Tidying complex data is incredibly complex.</p>
<p>From our data and project, we came away with a few insights. First, there are a vast amount of differences and complexity between clinical trials. Using our data as a judge, a real-life phase 3 trial and its primary outcome is rarely simple and straight forward. Attempting to create any general structure currently seems nearly impossible. This is humbling and motivating.</p>
<p>The fragility index is not the most quantitatively complex or descriptive metric. However, it is not meant to be. Literature suggests that the fragility index is an easy to synthesize metric that could be included with a p-value to try to improve biostatitical literacy in clinical and research settings. The target audience for the FI, if it is accepted by the community, is not biostatisticians but clinicians. This brings up a broader conversation discussed in our M.S. program here at Columbia. As we enter our careers we will likely work with individuals who have expertise in other fields, and rely on our knowledge of biostatistics. It is part of our job to disseminate biostatistics information in a way that is most easily absorbed by our other team members.</p>
<p>Having said that, our limited data appears to show that a well-explored chronic disease has a statistically robust result, given the higher FI. For instance, the trial studying on Chronic Heart Failure has the highest FI among our findings. On the other hand, less well-known chronic disease or even acute diseases have lower FI. Also note that the diseases in our data are all non-cancers, which suggests the potential of FI to be used out of oncololgy.</p>
</div>
<div id="secondary-data-clinical-trials-dataset" class="section level2">
<h2>Secondary Data: clinical trials dataset</h2>
<p>Surprisingly, there were much less issues downloading every clinical trial and graphing different characteristics. At this more “bird’s eye” level describing a study, the data is much more consistent and tidy, allowing for easier manipulation and usage.</p>
<p>Seeing the distribution of trials across the US shows what one may guess: there are generally more trials in metropolitan areas which have large cities and relevant academic institutions. As the NIH is located in Maryland, many NIH sponsored trials are associated with a location in Maryland. California is the state with by far the most number of trials overall. Surprisingly, Alabama has the 2nd most number of studies performed according to our data. None of the group members would have guessed Alabama being in the top 2 states, let alone being an above average state. Another intersting fact is that observational studies with patient registries are highly clustered in major cities. On the other hand, when we look at the time trend, we can tell that industries has much more completed/ ongoing clinical trials compared to NIH after 2000.</p>
<p>When we order all the sponsors by number of studies they’ve supported, we can see a healthy mix of govermental agencies (e.g. NCI), industries (e.g. Pfizer) and academical institutions(e.g. Stanford University). Memorial Sloan Kettering Cancer Center, which is one of our affiliated institutions, has the 20th most amount of studies recorded at 530. Also, Columbia University itself ranked 62nd with 249 studies recorded.</p>
</div>
</div>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">


 
<hr />
<p style="text-align: center;">
A work by <a href="https://github.com/bbunning">Bryan Bunning</a>, <a href="https://github.com/yy3019">Yuanzhi Yu</a>, <a href="https://github.com/zl2860">Zongchao Liu</a>, <a href="https://github.com/gavin099">Gavin Ko</a>, and <a href="https://github.com/Mediculus/">Kevin S.W.</a>
</p>
<p style="text-align: center;">
© Copyright 2019 The Fragility Index Project Team, All Rights Reserved | Powered by Github.io
</p>

<p> </p>





</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
